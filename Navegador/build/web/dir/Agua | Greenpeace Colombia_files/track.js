var dc=dc||{};dc.track={domain:"//tr.datacrush.la/track/",path_event:"/event/",path_widget:"/widget/",path:"/track/",version:"1.0",expiration:3650,last_visit:60,timestamp:null,data:{},session_id:null,page_id:null,portalID:null,forms:null,forms_index:null,content_key:null,contactKey:null,init:function(t){var e=dc.track.version,r="",a="",c="",n="",o="",i="",d="0",u=dc.track.getResolution(),s=dc.track.getCharset(),k=dc.track.getLanguage(),l=dc.track.getHostname(),m=dc.track.getTitle(),g=dc.track.getUrl(),f=dc.track.getReferrer(),p=dc.track.getUserAgent(),v=dc.track.uid(),h=dc.track.now(),d=dc.track.getVisit(h),y=dc.track.getHostname(),_=dc.track.getParam("tracking_key"),x=dc.track.getParam("utm_source"),C=dc.track.getParam("send_key"),T=dc.track.getParam("utm_medium"),w=dc.track.getParam("utm_content"),i=dc.track.getParam("contact_key");if(""==i&&(i=dc.track.getParam("dck")),""==C&&(C=dc.track.getParam("dcs")),""==x&&(x="direct_traffic"),t.portalID)var r=t.portalID;t.apiKey&&(a=t.apiKey),""==i&&(i=t.contactKey?t.contactKey:dc.track.getCookie("key")),dc.track.contactKey=i,t.landingKey&&(o=t.landingKey),t.email&&(c=t.email),t.formKey&&(n=t.formKey),dc.track.timestamp=h,dc.track.portalID=r,dc.track.data={version:e,portalID:r,api_key:a,contact_key:i,form_key:n,landing_key:o,email:c,uid:v,user_agent:p,resolution:u,charset:s,language:k,hostname:l,title:m,url:g,referer:f,timestamp:h,visit:d,source_type:x,source:y,tracking_key:_,send_key:C,utm_medium:T,utm_content:w,exit:0,duration:""};var g=dc.track.domain;dc.track.send(g,dc.track.data),dc.track.setCookie("key",i),""!=x&&"direct_traffic"!=x&&1==d&&(dc.track.setCookie("origin_source",x,6048e5),dc.track.setCookie("origin_referer",f,6048e5)),(""==dc.track.getCookie("origin_source")||1==d&&""!=f)&&(dc.track.setCookie("origin_source",x,6048e5),dc.track.setCookie("origin_referer",f,6048e5)),(x.toLowerCase().indexOf("email")>=0||x.toLowerCase().indexOf("datacrush")>=0)&&dc.track.setCookie("origin_source",x,6048e5),dc.track.setCookie("origin_send_key",C,6048e5)},event:function(t,e,r,a,c){if(void 0==a)var a="";if(void 0==c)var c="";""==dc.track.contactKey&&(dc.track.contactKey=dc.track.getCookie("key"));var n={};n.portalID=t,n.type=e,n.email=r,n.value=a,n.revenue=c,n.contact_key=dc.track.contactKey,n.title=dc.track.getTitle(),n.url=dc.track.getUrl(),n.origin_source=dc.track.getCookie("origin_source"),n.origin_referer=dc.track.getCookie("origin_referer"),n.send_key=dc.track.getCookie("origin_send_key");var o=dc.track.domain+dc.track.path_event;dc.track.send(o,n)},eventProcess:function(t){var e="";"1"==t.result&&(e=t.contact_key,dc.track.setCookie("key",e))},generateURL:function(t,e,r){if(void 0==r)var r="";var a=t+r;return a+"?"+dc.track.param(e)},send:function(t,e){var t=dc.track.generateURL(t,e),r=document.createElement("script");r.setAttribute("src",t),document.head.appendChild(r)},exit:function(){dc.track.data.exit=1,dc.track.data.duration=dc.track.getExitTime();var t=dc.track.generateURL(dc.track.data);dc.track.ajax("get",t,null,null,null,!1)},tostr:function(){return Object.prototype.toString},isFunction:function(t){return"[object Function]"===dc.track.tostr.call(t)},each:function(t,e){var r,a=0,c=t.length;if(void 0===c){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(var n=t[0];c>a&&e.call(n,a,n)!==!1;n=t[++a]);return t},isArray:function(t){return"[object Array]"===dc.track.tostr.call(t)},inArray:function(t,e){for(var r=0,a=e.length;a>r;r++)if(e[r]===t)return r;return-1},getParam:function(t){var e,r,a=window.location.search.substring(1),c=a.split("&");for(e=0;e<c.length;e++)if(r=c[e].split("="),r[0]==t)return unescape(r[1]);return""},encodeParam:function(t,e){var r=encodeURIComponent;return r instanceof Function?e?encodeURI(t):r(t):escape(t)},param:function(t,e){function r(t,e){a[a.length]=dc.track.encodeParam(t)+"="+dc.track.encodeParam(e)}var a=[];e=e||"&";for(var c in t)dc.track.isArray(t[c])?dc.track.each(t[c],function(){r(c,this)}):r(c,dc.track.isFunction(t[c])?t[c]():t[c]);return a.join(e).replace(/%20/g,"+")},uid:function(){var t="0123456789abcdefghijklmopqrstwxyzABCDEFGHIJKLMOPQRSTWXYZ".split(""),e=dc.track.getCookie("uid");if(""==e){for(var r=[],a=0;50>a;a++)r[a]=t[Math.floor(16*Math.random())];e=r.join("")}return e},now:function(){return(new Date).getTime()},getLanguage:function(){var t=navigator.language||navigator.userLanguage;return t},getTitle:function(){var t=document.title;return t},getCharset:function(){var t=document.charset;return t},getResolution:function(){var t=screen.width+"x"+screen.height;return t},getUrl:function(){var t=document.location.href;return t},getReferrer:function(){var t=document.referrer;return t},getHostname:function(){try{return document.location.hostname}catch(t){return document.domain}},getUserAgent:function(){return navigator.userAgent},getVisit:function(t){var e="0",r=dc.track.getCookie("timestamp");if(""==r)e="1",dc.track.setCookie("timestamp",t);else{var a=Math.floor(((new Date).getTime()-r)/1e3/60);a>=dc.track.last_visit&&(e="1"),dc.track.setCookie("timestamp",t)}return e},getExitTime:function(){var t="0",e=dc.track.now(),t=0;return t=Math.floor((e-dc.track.timestamp)/1e3)},setCookie:function(t,e,r){var a,c=new Date;if(void 0==r)var r=864e5*dc.track.expiration;c.setTime(c.getTime()+r),a=c.toGMTString(),document.cookie=t+"="+e+";expires="+a+";path=/"},getCookie:function(t){var e=new RegExp("(^|;)[ ]*"+t+"=([^;]*)"),r=e.exec(document.cookie);return r?r[2]:""},removeCookie:function(t,e,r){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"},ajax:function(method,url,data,output,callback,async,callback_param){var xmlhttp,nocache=(new Date).getTime();if(void 0==callback_param)var callback_param="";if(void 0==async||null==async)var async=!0;url=-1==url.indexOf("?")?url+"?"+nocache:url+"&rnd="+nocache,data=this.jsonToUri(data),xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.open(method,url,async),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){if(responseText=xmlhttp.responseText,"json"==output)var responseText=eval("("+responseText+")");callback&&(callback_param?callback(responseText,callback_param):callback(responseText))}},"POST"==method?xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"):url=url+"&"+data,xmlhttp.send(data)},jsonToUri:function(t){var e=[];for(var r in t)if("object"==typeof t[r])for(var a in t[r])e.push(encodeURIComponent(r)+"["+a+"]="+encodeURIComponent(t[r][a]));else e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e=e.join("&")},attributeElement:function(t,e){var r=0,a="";for(r=0;r<t.attributes.length;r++){var c=t.attributes[r];if(c.name.indexOf(e)>-1){a=c.value;break}}return a},setServerDomain:function(t){document.currentScript,this.domain=this.domain+this.path}},dc.track.init(dcDataTrack);
