if (self.CavalryLogger) { CavalryLogger.start_js(["N+ruO"]); }

__d("UFIStoryActionType",[],(function a(b,c,d,e,f,g){f.exports={CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"};}),null);
__d('UFIStoryAction',['UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeAcceptedAnswer:function i(j,k,l){return {type:c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l};},commentsArrived:function i(j,k,l,m){return {type:c('UFIStoryActionType').COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m};},pageInComments:function i(j,k,l,m){return {type:c('UFIStoryActionType').PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m};},showComments:function i(j){return {type:c('UFIStoryActionType').SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},showReplies:function i(j,k,l){return {type:c('UFIStoryActionType').SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l};},spamFetched:function i(j,k,l,m){return {type:c('UFIStoryActionType').SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m};},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return {type:c('UFIStoryActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n};},changeReactionSuccess:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k};},changeReactionFailure:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k};},toggleReplies:function i(j,k){return {type:c('UFIStoryActionType').TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k};},friendTyping:function i(j){return {type:c('UFIStoryActionType').FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},someoneTyping:function i(j){return {type:c('UFIStoryActionType').SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},typingStopped:function i(j){return {type:c('UFIStoryActionType').TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:c('UFIStoryActionType').LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l};},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:c('UFIStoryActionType').LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k};}};f.exports=h;}),null);
__d('getVendorPrefixedEventName',['fbjs/lib/ExecutionEnvironment'],(function a(b,c,d,e,f,g){'use strict';function h(m,n){var o={};o[m.toLowerCase()]=n.toLowerCase();o['Webkit'+m]='webkit'+n;o['Moz'+m]='moz'+n;o['ms'+m]='MS'+n;o['O'+m]='o'+n.toLowerCase();return o;}var i={animationend:h('Animation','AnimationEnd'),animationiteration:h('Animation','AnimationIteration'),animationstart:h('Animation','AnimationStart'),transitionend:h('Transition','TransitionEnd')},j={},k={};if(c('fbjs/lib/ExecutionEnvironment').canUseDOM){k=document.createElement('div').style;if(!('AnimationEvent' in window)){delete i.animationend.animation;delete i.animationiteration.animation;delete i.animationstart.animation;}if(!('TransitionEvent' in window))delete i.transitionend.transition;}function l(m){if(j[m]){return j[m];}else if(!i[m])return m;var n=i[m];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&o in k)return j[m]=n[o];return '';}f.exports=l;}),null);
__d('ReactTransitionEvents',['fbjs/lib/ExecutionEnvironment','getVendorPrefixedEventName'],(function a(b,c,d,e,f,g){'use strict';var h=[];function i(){var m=c('getVendorPrefixedEventName')('animationend'),n=c('getVendorPrefixedEventName')('transitionend');if(m)h.push(m);if(n)h.push(n);}if(c('fbjs/lib/ExecutionEnvironment').canUseDOM)i();function j(m,n,o){m.addEventListener(n,o,false);}function k(m,n,o){m.removeEventListener(n,o,false);}var l={addEndEventListener:function m(n,o){if(h.length===0){window.setTimeout(o,0);return;}h.forEach(function(p){j(n,p,o);});},removeEndEventListener:function m(n,o){if(h.length===0)return;h.forEach(function(p){k(n,p,o);});}};f.exports=l;}),null);
__d('KeyframeAnimation',['invariant','CSS','Map','ReactTransitionEvents','UserAgent','nullthrows','queryThenMutateDOM','uniqueID'],(function a(b,c,d,e,f,g,h){var i='KeyframeAnimation-',j='animation-';function k(l){'use strict';this.$KeyframeAnimation3=l;this.$KeyframeAnimation8=true;this.$KeyframeAnimation5=new (c('Map'))();this.$KeyframeAnimation5.set('animation-name',i+c('uniqueID')());this.$KeyframeAnimation4=new (c('Map'))();if(!k.$KeyframeAnimation1){var m=document.createElement('style');document.head.appendChild(m);var n=c('nullthrows')(m.sheet);n instanceof CSSStyleSheet||h(0);k.$KeyframeAnimation1=n;k.$KeyframeAnimation2=new (c('Map'))();}this.$KeyframeAnimation9=c('UserAgent').isEngine('WebKit')?'-webkit-':'';}k.prototype.defineKeyframes=function(l){'use strict';for(var m=Object.entries(l),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p,r=q[0],s=q[1];r=parseFloat(r,10);r>=0&&r<=100||h(0);var t='';for(var u=Object.entries(s).sort(),v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x,z=y[0],aa=y[1];t+=z+': '+aa+';';}this.$KeyframeAnimation4.set(r,t);}return this;};k.prototype.defineKeyframe=function(l,m){'use strict';l=parseFloat(l,10);l>=0&&l<=100||h(0);var n='';for(var o=Object.entries(m).sort(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=s[0],u=s[1];if(t.substring(0,j.length)===j||t==='transform')t=this.$KeyframeAnimation9+t;n+=t+': '+u+';';}this.$KeyframeAnimation4.set(l,n);return this;};k.prototype.setDirection=function(l){'use strict';this.$KeyframeAnimation5.set('animation-direction',l);return this;};k.prototype.setDuration=function(l){'use strict';this.$KeyframeAnimation5.set('animation-duration',l+'s');return this;};k.prototype.setTimingFunction=function(l){'use strict';this.$KeyframeAnimation5.set('animation-timing-function',l);return this;};k.prototype.setIterationCount=function(l){'use strict';this.$KeyframeAnimation5.set('animation-iteration-count',l+'');return this;};k.prototype.setFillMode=function(l){'use strict';this.$KeyframeAnimation5.set('animation-fill-mode',l);return this;};k.prototype.setAnimationDelay=function(l){'use strict';this.$KeyframeAnimation5.set('animation-delay',l+'s');return this;};k.prototype.setFinishedCallback=function(l){'use strict';this.$KeyframeAnimation6=l;return this;};k.prototype.setMemoize=function(l){'use strict';this.$KeyframeAnimation8=l;return this;};k.prototype.start=function(){'use strict';this.$KeyframeAnimation5.has('animation-duration')||h(0);if(this.$KeyframeAnimation7){this.restartAnimation();return;}var l=this.$KeyframeAnimation3,m=this.$KeyframeAnimation10(),n=this.$KeyframeAnimation11(m),o=void 0;if(this.$KeyframeAnimation8&&k.$KeyframeAnimation2.has(n)){var p=c('nullthrows')(k.$KeyframeAnimation2.get(n));this.$KeyframeAnimation5.set('animation-name',p);o=p;}else{k.$KeyframeAnimation1.insertRule(m,k.$KeyframeAnimation1.cssRules.length);o=c('nullthrows')(this.$KeyframeAnimation5.get('animation-name'));if(this.$KeyframeAnimation8)k.$KeyframeAnimation2.set(n,o);}var q=this.$KeyframeAnimation12(o);if(!this.$KeyframeAnimation8||!k.$KeyframeAnimation2.has(q)){k.$KeyframeAnimation1.insertRule(q,k.$KeyframeAnimation1.cssRules.length);if(this.$KeyframeAnimation8)k.$KeyframeAnimation2.set(q,o);}c('queryThenMutateDOM')(function(){},function(){this.$KeyframeAnimation13();c('CSS').addClass(l,o);}.bind(this));};k.prototype.restartAnimation=function(){'use strict';var l=this.$KeyframeAnimation3;c('CSS').removeClass(l,c('nullthrows')(this.$KeyframeAnimation5.get('animation-name')));l.offsetWidth;this.$KeyframeAnimation7=false;c('CSS').addClass(l,c('nullthrows')(this.$KeyframeAnimation5.get('animation-name')));};k.prototype.$KeyframeAnimation13=function(){'use strict';c('ReactTransitionEvents').addEndEventListener(this.$KeyframeAnimation3,this.$KeyframeAnimation14.bind(this));};k.prototype.$KeyframeAnimation12=function(l){'use strict';var m='';m+='.'+l+' {';for(var n=this.$KeyframeAnimation5,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q,s=r[0],t=r[1];m+=s+': '+t+';';}m+='}';return m;};k.prototype.$KeyframeAnimation10=function(){'use strict';var l=this.$KeyframeAnimation5.get('animation-name'),m=void 0;if(c('UserAgent').isEngine('WebKit')){m='@-webkit-keyframes';}else m='@keyframes';var n=m+' '+l+' {';for(var o=this.$KeyframeAnimation4,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=s[0],u=s[1];n+=t+'% {'+u+'}';}return n+'}';};k.prototype.$KeyframeAnimation14=function(){'use strict';if(!this.$KeyframeAnimation7){if(this.$KeyframeAnimation6)this.$KeyframeAnimation6(this.$KeyframeAnimation3);this.$KeyframeAnimation7=true;}};k.prototype.$KeyframeAnimation11=function(l){'use strict';return l.substring(l.indexOf('{')+1).toLowerCase().replace(/\s+/g,'');};f.exports=k;}),null);
__d('CSSAnimationBuilder',['KeyframeAnimation'],(function a(b,c,d,e,f,g){var h={keyframeAnimation:function i(j){return new (c('KeyframeAnimation'))(j);}};f.exports=h;}),null);
__d('ReactionIconAnimation',['csx','cx','CSSAnimationBuilder','DOM','DOMVector','Locale','Parent','UFIConfig','UFIReactionTypes','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j="._zw3 .UFILikeLink",k="._5jmm",l=".photoUfiContainer";function m(o){var p=c('UFIReactionTypes').reactions[o].class_name;return c('DOM').create('div',{className:"_x6_"+(!!c('UFIConfig').showCustom?' '+"_3uet":'')+(!!c('UFIConfig').showCustom?' '+"_4e-m":'')},[c('DOM').create('i',{className:c('joinClasses')(p,"_2p78 _9--")})]);}var n={animateToParentStoryLikeButton:function o(p,q,r){var s=c('Parent').bySelector(p,k)||c('Parent').bySelector(p,l),t=s&&c('DOM').scry(s,j)[0];if(!t)return;var u=c('DOMVector').getElementPosition(t),v=c('DOMVector').getElementPosition(p);if(c('Locale').isRTL()){var w=c('DOMVector').getElementDimensions(t);u.x=u.x+w.x-13;}n.trigger({durationMs:r,reactionType:q,transformStart:'translate('+v.x+'px, '+v.y+'px)',transformEnd:'translate('+(u.x-1)+'px, '+(u.y+2)+'px) scale(0.82, 0.82)'});},trigger:function o(p){var q=m(p.reactionType),r=c('CSSAnimationBuilder').keyframeAnimation(q).defineKeyframe('0%',{opacity:1,transform:p.transformStart}).defineKeyframe('100%',{opacity:1,transform:p.transformEnd}).setDuration(p.durationMs/1000).setIterationCount(1);document.body&&document.body.appendChild(q);r.start();}};f.exports=n;}),null);
__d('UFIReactionIconImpl.react',['cx','Image.react','React','UFIConfig','UFIReactionTypes','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m,n){'use strict';return m.className!==this.props.className||m.reaction!==this.props.reaction||m.size!==this.props.size||m.grayscale!==this.props.grayscale;};l.prototype.renderImage=function(){'use strict';var m=c('UFIReactionTypes').reactions[this.props.reaction].name,n='/images/ufi/reactions/v6/svg/'+m+'.svg';if(this.props.hasStaticSVGDock){return c('React').createElement(c('Image.react'),{style:{position:'absolute'},src:n});}else return c('React').createElement('i',{className:c('joinClasses')(c('UFIReactionTypes').reactions[this.props.reaction].class_name,"_2p78"+(this.props.size==='13'?' '+"_9-y":'')+(this.props.size==='16'?' '+"_9--":'')+(this.props.size==='48'?' '+"_9-_":'')+(this.props.size==='96'?' '+"_9_0":'')+(this.props.grayscale?' '+"_pxi":''))});};l.prototype.render=function(){'use strict';return c('React').createElement('span',{className:c('joinClasses')("_9zc"+(this.props.size==='13'?' '+"_2p79":'')+(this.props.size==='16'?' '+"_2p7a":'')+(this.props.size==='48'?' '+"_2p7b":'')+(this.props.size==='96'?' '+"_9-w":''),this.props.className,(!!c('UFIConfig').showCustom?"_3uet":'')+(!!c('UFIConfig').showCustom?' '+"_4e-m":''))},this.renderImage());};function l(){'use strict';i.apply(this,arguments);}l.propTypes={className:k.string,grayscale:k.bool,isSVGDock:k.bool,reaction:k.number.isRequired,size:k.oneOf(['13','16','48','96'])};l.defaultProps={className:null,grayscale:false,isSVGDock:false,size:'16'};f.exports=l;}),null);
__d('RTLKeys',['Keys','Locale'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('Keys')),i=null;function j(){if(i===null)i=c('Locale').isRTL();return i;}h.REAL_RIGHT=c('Keys').RIGHT;h.REAL_LEFT=c('Keys').LEFT;delete h.LEFT;delete h.RIGHT;h.getLeft=function(){return j()?h.REAL_RIGHT:h.REAL_LEFT;};h.getRight=function(){return j()?h.REAL_LEFT:h.REAL_RIGHT;};f.exports=h;}),null);
__d('sortReactionTypes',['UFIReactionTypes'],(function a(b,c,d,e,f,g){var h={};c('UFIReactionTypes').ordering.forEach(function(j,k){h[j]=k;});function i(j,k){return Object.keys(j).map(function(l){return Number(l);}).sort(function(l,m){if(k&&l===c('UFIReactionTypes').LIKE)return -1;if(j[l]['default']===j[m]['default'])return h[l]-h[m];return j[m]['default']-j[l]['default'];});}f.exports=i;}),null);
__d('UFIReactionsBlingTokensDirect.react',['cx','fbt','React','ReactionIconAnimation','RTLKeys','UFIConfig','UFIReactionIconImpl.react','UFIReactionTypes','UFIStoryAction','joinClasses','sortReactionTypes'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').Component,m=c('React').PropTypes,n=300;j=babelHelpers.inherits(o,l);k=j&&j.prototype;function o(p,q){k.constructor.call(this,p,q);this.renderToken=function(r,s){var t=this.props.feedback,u=i._("{reaction_type} ({reduced_count})",[i.param('reaction_type',c('UFIReactionTypes').reactions[r].display_name),i.param('reduced_count',t.reactioncountmap[r].reduced)]);if(!this.props.showCounts)u=c('UFIReactionTypes').reactions[r].display_name;return c('React').createElement('a',{'aria-label':u,'data-hover':'tooltip','data-tooltip-content':u,className:"_3emk"+(this.state.selectedReaction===r?' '+"_4wf_":''),key:'reactionType-'+r,onClick:this.onTokenClick.bind(this,r),onKeyDown:this.onKeyDown.bind(this,r),ref:s,role:'button',tabIndex:0},c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_4-op",reaction:r}),c('React').createElement('span',{className:"_3chu"},t.reactioncountmap[r].reduced));}.bind(this);this.state={selectedReaction:null,reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap)};}o.prototype.componentWillReceiveProps=function(p){this.setState({reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap)});};o.prototype.getReactionTypes=function(p){var q=c('sortReactionTypes')(p,false).filter(function(r){return c('UFIReactionTypes').reactions[r]&&p[r]&&p[r]['default'];});q=q.slice(0,3);return q;};o.prototype.onKeyDown=function(p,event){if(event.keyCode===c('RTLKeys').RETURN)this.onTokenClick(p,event);};o.prototype.onTokenClick=function(p,event){var q=this.props,r=q.feedback,s=q.contextArgs;if(!event.target||!s||!r.canviewerreact||!r.supportedreactions||r.supportedreactions.indexOf(p)<0)return;var t=r.viewerreaction===p;this.setState({selectedReaction:p});if(t)p=c('UFIReactionTypes').NONE;var u=c('UFIStoryAction').changeReaction(s,p,event.target);if(!t&&event.target instanceof HTMLElement)c('ReactionIconAnimation').animateToParentStoryLikeButton(event.target,p,n);if(c('UFIConfig').reactionsBlingBarFunnelLogger)c('UFIConfig').reactionsBlingBarFunnelLogger.initiateLogging(r.entidentifier,p);setTimeout(function(){this.context.dispatch(u);this.setState({selectedReaction:null});}.bind(this),n);};o.prototype.render=function(){return c('React').createElement('div',{className:c('joinClasses')("_3t53"+(this.props.feedback.canviewerreact?' '+"_4wg1":''),this.props.className)},c('React').createElement('span',{className:"_3t54",ref:'tokens'},this.state.reactionTypes.map(this.renderToken,this)),this.props.children);};o.defaultProps={className:null};o.contextTypes={dispatch:m.func};f.exports=o;}),null);